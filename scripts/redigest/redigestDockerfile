# Use the official micromamba image as the base image
FROM mambaorg/micromamba:1.4.2

# Set the working directory
WORKDIR /hich

# Install Poetry
RUN micromamba install -c conda-forge -c bioconda -n base -y pip
RUN micromamba install -c conda-forge -n base poetry

# Copy the rest of the project files
COPY . /hich

ENV PATH="/opt/conda/bin:$PATH"

RUN poetry config virtualenvs.create false \
    && poetry install --no-interaction --no-ansi


